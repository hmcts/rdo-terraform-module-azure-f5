---
# Enable when first provision new infrastructure
#  - name: Waitings for F5, first to come online
#  wait_for: timeout=600
#  delegate_to: localhost
#  run_once: true

- wait_for:
    port: 443
    host: '{{ (ansible_ssh_host|default(ansible_host))|default(inventory_hostname) }}'
    search_regex: OpenSSH
    delay: 10
  connection: local

- name: Disable the setup utility
  bigip_sys_global:
    gui_setup: no
    banner_text: "{{ bannertxt }}"
    provider:  "{{ provider }}"
  delegate_to: localhost

- name: Set the hostname of the BIG-IP
  bigip_hostname:
    hostname: "{{ hostname }}"
    provider:  "{{ provider }}"
  delegate_to: localhost

- name: System Setup
  include_tasks: system.yml

- name: Network Setup
  include_tasks: network.yml

- name: Installing AS3 iApp
  include_tasks: as3.yml

# Example Node / Pool and Virtual Server Server
#- name: Installing AS3 iApp
# include_tasks: as3.yml